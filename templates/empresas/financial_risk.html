{% extends "app_base.html" %}
{% load static %}
{% load humanize %}
{% load mathfilters %}
{% block page_title %}
{{ company.name }}
{% endblock %}

{% block body_class %}background_grey{% endblock %}

{% block content %}
	<div class="parallax-container">
		<h3 class="center-align white-text text-darken-3 light">El riesgo financiero... ¿Podré seguir pagando?</h3>
		<div class="row center">{{company.name}}</div>
		<div class="row center">

			<div class="col m4 s3">
				<a href="{% url 'empresas:recommendations' %}" id="download-button" class="btn-large waves-effect waves-light transparent pad_top border-white">Riesgo cliente  </a>
			</div>
			<div class="col m4 s3">
				<a href="{% url 'empresas:recommendations_providers' %}" id="download-button" class="btn-large waves-effect waves-light transparent pad_top border-white">Riesgo proveedor </a>
			</div>
			<div class="col m4 s3">
				<a href="{% url 'empresas:recommendations_providers' %}" id="download-button" class="btn-large waves-effect waves-light transparent pad_top border-white">Riesgo financiero  </a>
			</div>
        </div>
	    <div class="parallax"><img src="{% static 'images/super-powers.jpg' %}"></div>
	</div>
	<div class="row">
			    <div class="grey-bckg">
			    	<div class="row grey-bckg padding_title">
		      	  		<div class="col s12 m2 line">
		      	  			<div class="center-align">
				            <i class="fa fa-money" aria-hidden="true"></i><span class="card-title"> Situación financiera</span>
				            <h3 class="align-right orange-text darken-1"></h3>
				            {% if company.hats_alert %}
			                    {% if company.hats_alert == "ROJA" %}
			                    <h4 class="align-right red-text darken-1">{{company.hats_alert}}</h4>
			                    {% elif company.hats_alert == "AMARILLA" %}
			                    <h4 class="align-right yellow-text darken-1">{{company.hats_alert}}</h4>
			                    {% elif company.hats_alert == "VERDE" %}
			                    <h4 class="align-right green-text darken-1">{{company.hats_alert}}</h4>
			                    {% endif %}
			                    {% else %}
			                    <h4 class="align-right orange-text darken-1">-</h4>
			                {% endif %}
				            </div>
				        </div>

				        <div class="col s12 m2 line">
		      	  			<div class="center-align ">
				            <i class="fa fa-users" aria-hidden="true"></i><span class="card-title"> Ratio endeudamiento</span>
				            <h4 class="align-right orange-text darken-1">80%</h4>
				            <span class="green-text text-darken-1"><i class="fa fa-sort-up" aria-hidden="true"></i><span class="card-title">10%</span></span> <span class="light">From last month</span>
				            </div>
				        </div>

				        <div class="col s12 m2 line">
		      	  			<div class="center-align ">
				            <i class="fa fa-eur" aria-hidden="true"></i><span class="card-title"> Deuda / EBITDA</span>
				            {% if company.deuda_total > 0 %}
				            <h4 class="align-right orange-text darken-1">{{company.deuda_total|div:ultimos_eeff.ebitda|mul:100|floatformat:1|intcomma}}</h4>
				            {% else %}
				            <h4 class="align-right orange-text darken-1">-</h4>
				            {% endif %}
				            <span class="red-text text-darken-1"><i class="fa fa-sort-down" aria-hidden="true"></i><span class="card-title">4%</span></span> <span class="light">From last month</span>
				            </div>
				        </div>

				        <div class="col s12 m2 line">
		      	  			<div class="center-align ">
				            <i class="fa fa-cubes" aria-hidden="true"></i><span class="card-title"> Deuda a largo</span>
				            <h4 class="align-right orange-text darken-1">{{company.cirbe.largo_plazo_dispuesto|floatformat:0|intcomma}}€</h4>
				            <span class="red-text text-darken-1"><i class="fa fa-sort-down" aria-hidden="true"></i><span class="card-title">7%</span></span> <span class="light">From last month</span>
				            </div>
				        </div>

				        <div class="col s12 m2 line">
		      	  			<div class="center-align ">
				            <i class="fa fa-rocket" aria-hidden="true"></i><span class="card-title"> Deuda a corto</span>
				            <h4 class="align-right orange-text darken-1">{{company.cirbe.corto_plazo_dispuesto|floatformat:0|intcomma}}€</h4>
				            <span class="green-text text-darken-1"><i class="fa fa-sort-up" aria-hidden="true"></i><span class="card-title">5%</span></span> <span class="light">From last month</span>
				            </div>
				        </div>

				        <div class="col s12 m2">
		      	  			<div class="center-align ">
				            <i class="fa fa-money" aria-hidden="true"></i><span class="card-title"> Ratio corto/largo</span>
				            {% if company.cirbe.largo_plazo_dispuesto > 0 %}
				            <h4 class="align-right orange-text darken-1">{{company.cirbe.corto_plazo_dispuesto|div:company.cirbe.largo_plazo_dispuesto|mul:100|floatformat:1|intcomma}}%</h4>
				            {% else %}
				            <h4 class="align-right orange-text darken-1">-</h4>
				            {% endif %}
				            <span class="green-text text-darken-1"><i class="fa fa-sort-up" aria-hidden="true"></i><span class="card-title">1%</span></span> <span class="light">From last month</span>
				            </div>
				        </div>
				    
				    </div>
				 </div>

				 <!-- /////////////////////////////////////////////////////////////
				 ////// ¿Como son mis clientes?
				 ///////////////////////////////////////////////////////////// -->

					<div class="white_back title_conf">
				    	<h3 class="flow-text">  Riesgo de crédito - ¿Puedo asumir más endeudamiento?</h3>
				    </div>
			    	<div class="row title_conf">
			    	<!-- Resultado explotaciones -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Ratio de endeudamiento</span>
					              <canvas id="ratio_endeudamiento_graph" width="300" height="100"></canvas>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    	
			    	<!-- EBITDA -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Deuda total</span>
					              <canvas id="deuda_largo_graph" width="300" height="100"></canvas>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>

			    		<!-- EBITDA -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Deuda por producto</span>
					            	<div class="row center-align">

						            		{% for producto in company.productos.all %}
						            		<div class="col m4 s6">
						            			<div class="card blue-grey lighten-3">
						            				<span class="card-title blue-grey-text text-darken-3">{{producto.producto}}</span>
						              				<h3 class="orange-text text-darken-2">{{producto.dispuesto|floatformat:0|intcomma}}€</h3>
						              				<small class="blue-grey-text text-darken-3">Fecha vencimiento: {{producto.fecha_vencimiento}}</small><br>
						              				<small class="blue-grey-text text-darken-3">Cuota anual: {{producto.cuota_anual|floatformat:1|intcomma}}€</small>
						              			</div>
						              		</div>
						              		{% endfor %}
					            	</div>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    	
			    	</div>

			    <!-- /////////////////////////////////////////////////////////////
				 ////// ¿Cómo me relaciono con ellos?
				 ///////////////////////////////////////////////////////////// -->

			    <div class="white_back title_conf">
			    	<h3 class="flow-text">Riesgo de liquidez</h3>
			    </div>
			    	<div class="row title_conf">
			    	<!-- Facturación -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Deuda a corto</span>
					              <canvas id="deuda_corto_graph" width="300" height="100"></canvas>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>

			    		
			    	<!-- EBITDA -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Calendario aproximado de próximos pagos</span>
					            	{% for producto in company.productos.all %}
					            		{{producto.plazo_total}}
					            		{{producto.plazo_remanente}}
					            		{{producto.cuota_mensual}}
					            	{% endfor %}
					              	<canvas id="calendario_de_pagos" width="300" height="100"></canvas>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    	<!-- Resultado explotaciones -->
			    		<div class="col m8 s12">
			    			<div class="col m6 s12">
				    			<div class="card grey lighten-4">
						            <div class="card-content grey-text darken-4">
						            	<span class="card-title">Penetración</span>
						            	<canvas id="penetration_graph" width="300" height="200"></canvas>
						            </div>
						        </div>
						    </div>
						    <div class="col m6 s12">
						    	<div class="card grey lighten-4">
						    	<div class="card-content grey-text darken-4">
							    		<span class="card-title">Variance</span>
				              			<div class="row">
					              			<div class="col s4">
					              				<i class="fa fa-user" aria-hidden="true"></i>
					              				<br>
					              				You
					              			</div>
					              			<div class="col s5">
					              				<h4> 12<small>%</small></h4>
					              			</div>
					              			<div class="col s3">
					              				<span class="green-text text-darken-1"><i class="fa fa-sort-up" aria-hidden="true"></i><span class="card-title"> 34%</span></span> 
					              			</div>
				              			</div>
				              			<div class="row">
					              			<div class="col s4">
					              				<i class="fa fa-users" aria-hidden="true"></i>
					              				<br>
					              				Your comparables
					              			</div>
					              			<div class="col s5">
					              				<h4> 35<small>%</small></h4>
					              			</div>
					              			<div class="col s3">
					              				<span class="green-text text-darken-1"><i class="fa fa-sort-up" aria-hidden="true"></i><span class="card-title"> 10%</span></span> 
					              			</div>
				              			</div>
				              	</div>
				              	</div>
						    </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    </div>

			    <!-- /////////////////////////////////////////////////////////////
				 ////// ¿Debería buscar nuevas oportunidades?
				 ///////////////////////////////////////////////////////////// -->

			    <div class="white_back title_conf">
			    	<h3 class="flow-text">¿Debería buscar nuevas oportunidades?  <i class="fa fa-caret-right" aria-hidden="true"></i>  Amplia y mejora la calidad de tu cartera de clientes</h3>
			    </div>
			    	<div class="row title_conf">
			    	<!-- Facturación -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Concentración de mi empresa</span>
					            	<div class="row center-align">
					            		<div class="col m3 s12 line">
					            			<p>Clientes</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12 line">
					            			<p>Geográfica</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12 line">
					            			<p>Sectorial</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12">
					            			<p>Temporal</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
									</div>
									<div class="divider"></div>
									<div class="row center-align">
					            		<div class="col m3 s12">
					            				<h4 style="color: green"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12">
					            				<h4 style="color: green"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12">
					            				<h4 style="color: green"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m3 s12">
					            				<h4 style="color: green"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
									</div>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    </div>

			    <!-- /////////////////////////////////////////////////////////////
				 ////// ¿Cómo podría hacerlo?
				 ///////////////////////////////////////////////////////////// -->

			    <div class="white_back title_conf">
			    	<h3 class="flow-text">¿Cómo podría hacerlo? </h3>
			    </div>
			    	<div class="row title_conf">
			    	<!-- Facturación -->
			    		<div class="col m8 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					            	<span class="card-title">Margen de venta</span>
					              	<div class="row center-align">
					            		<div class="col m4 s12 line">
					            			<p>Margen comercial</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m4 s12 line">
					            			<p>Ratio de eficiencia</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m4 s12">
					            			<p>Ticket medio</p>
					            			<h4><i class="fa fa-user" aria-hidden="true"></i> </h4>
					            			<h4><i class="fa fa-users" aria-hidden="true"></i> </h4>
					            		</div>
									</div>
									<div class="divider"></div>
									<div class="row center-align">
					            		<div class="col m4 s12">
					            				<h4 style="color: red"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m4 s12">
					            				<h4 style="color: green"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
					            		<div class="col m4 s12">
					            				<h4 style="color: red"> <i class="fa fa-sort-down" aria-hidden="true"></i> </h4>
					            		</div>
									</div>
					            </div>
					        </div>
			    		</div>
			    		<div class="col m4 s12">
			    			<div class="card grey lighten-4">
					            <div class="card-content grey-text darken-4">
					              <blockquote>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">live_help</i> Geographical clients measures the degree of internationalization and diversification by region</p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">new_releases</i> <span class="bold"> Hint:</span> Try to overcome this concentration by finding more clients outside of your region. <a href="">Do you want us to find them for you?</a> </p>
					    				<p class="light"><i class="tiny material-icons indigo-text darken-4">info</i> You are part of the 20% with the higher risk of geographical concentration of your sector </p>
					    			</blockquote>
					            </div>
					        </div>
			    		</div>
			    		
			    	
			    </div>
	  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js"></script>

<script type="text/javascript">

	Chart.defaults.global.legend.display = false;
	// And for a doughnut chart
  	var deuda_corto_graph = document.getElementById("deuda_corto_graph");
  	var deuda_largo_graph = document.getElementById("deuda_largo_graph");
  	var ratio_endeudamiento_graph = document.getElementById("ratio_endeudamiento_graph");
  	var calendario_de_pagos = document.getElementById("calendario_de_pagos");
  	
  	// Como son mis clients
  	// LineGraph(facturacion_graph, {{balance_sells_avg_sector|safe}}, {{balance_sells|safe}});
  	// LineGraph(ebitda_graph, {{balance_ebitda_avg_sector|safe}}, {{balance_ebitda|safe}});
  	// LineGraph(resultado_graph, {{balance_resultado_avg_sector|safe}}, {{balance_resultado|safe}});
  	BarGraph(calendario_de_pagos); //, {{get_monthly_sells|safe}}, {{get_monthly_sector_avg_sells|safe}});
  	stackedbarchart(deuda_corto_graph, 'hola_2', 'hola_2', {{company.deuda_corto_pond}}, {{company.deuda_corto_sector_pond}}, 'Deuda a corto')
  	stackedbarchart(deuda_largo_graph, 'hola_2', 'hola_2', {{company.deuda_total_pond}}, {{company.deuda_total_sector_pond}}, 'Deuda a largo')
  	stackedbarchart(ratio_endeudamiento_graph, 'hola_2', 'hola_2', 80, 76, 'Ratio de endeudamiento')
  	// donut(my_geo_clients, {{ territoriales_clientes }}, ["In your region","Outside your region"]);
  	// donut(mean_geo_clients, {{ territoriales_proveedores }}, ["In your region","Outside your region"]);
  	// donut(mean_geo_concentration_clients, {{ sector_territoriales_clientes }}, ["In your region","Outside your region"]);
  	// donut(mean_geo_concentration_providers, {{ sector_territoriales_proveedores }}, ["In your region","Outside your region"]);
  	// donut(your_sector_concentration_clients, {{ counts_sectores_clients }}, {{sectores_clients|safe}});
  	// donut(your_sector_concentration_providers, {{ counts_sectores_providers }}, {{sectores_providers|safe}});
  	// donut(mean_sector_concentration_clients, {{ mean_counts_sectores_clients }}, {{mean_sectores_clients|safe}});
  	// donut(mean_sector_concentration_providers, {{ mean_counts_sectores_providers }}, {{mean_sectores_providers|safe}});

  	// barchart(your_timeseries_of_selling,{{your_monthly_sells_amount}},{{your_monthly_sells_month|safe}}, 'Tus Cobros del último año');
  	// barchart(sector_timeseries_of_selling,{{sector_monthly_sells_amount}},{{sector_monthly_sells_month|safe}}, 'Media de Cobros del sector el último año');
  	// barchart(your_ebitda,{{your_ebitda_amount}},{{your_ebitda_ejercicio|safe}}, 'Tu EBITDA');
  	// barchart(mean_ebitda,{{sector_ebitda_amount}},{{sector_ebitda_ejercicio|safe}}, 'EBITDA medio del sector');
  	// barchart(your_resultado_explotacion,{{your_resultado_explotacion_amount}},{{your_resultado_explotacion_ejercicio|safe}}, 'Tu resultado_explotacion');
  	// barchart(mean_resultado_explotacion,{{sector_resultado_explotacion_amount}},{{sector_resultado_explotacion_ejercicio|safe}}, 'Resultado_explotacion medio del sector');

  	// prepare data...
  	function BarGraph(div) {//, data_sector, data_you) {
  		// var labels_1 = [];
  		// var labels_2 = []; 
  		// var data_1=[];
  		// var data_2=[];
  		// var sector = data_sector
  		// var you = data_you
  		// sector.forEach(function(packet, i) {
	   //    labels_1.push(packet.month);
	   //    data_1.push(packet.c);
	   //  });
	   //  you.forEach(function(packet, i) {
	   //  	console.log('Bar Graphs')
	   //  	console.log(labels_1)
	   //  	console.log(packet.month)
	   //  	console.log(labels_1.includes(packet.month))
	   //  	if (labels_1.includes(packet.month)==true) {
	   //  		labels_2.push(packet.month);
	   //    		data_2.push(packet.c);
	   //  	} else {
	   //  		labels_2.push(labels_1[i]);
	   //    		data_2.push(0);
	   //  	}
	   //  });
	    barchart(div, ["Jan-16","Feb-16","Mar-16","Apr-16","May-16","Jun-16","Jul-16","Aug-16","Sep-16","Oct-16","Nov-16","Dec-16"], ["Jan-16","Feb-16","Mar-16","Apr-16","May-16","Jun-16","Jul-16","Aug-16","Sep-16","Oct-16","Nov-16","Dec-16"], [4,5,4,7,1,3,5,2,3,4,2,3], [4,3,3,7,5,8,2,2,1,2,3], 'Pagos mensuales') //barchart(div, labels_1, labels_2, data_1, data_2, '# Transferencias / mes')
  	}

  	// prepare data...
  	function LineGraph(div, data_sector, data_you) {
  		var labels_1 = [];
  		var labels_2 = []; 
  		var data_1=[];
  		var data_2=[];
  		var sector = data_sector
  		var you = data_you
  		sector.forEach(function(packet, i) {
	      labels_1.push(packet.ejercicio);
	      data_1.push(packet.c);
	    });
	    you.forEach(function(packet, i) {
	    	console.log('Line Graphs')
	    	console.log(labels_1)
	    	console.log(packet.ejercicio)
	    	console.log(labels_1.includes(packet.ejercicio))
	      	if (labels_1.includes(packet.ejercicio)==true) {
	    		labels_2.push(packet.ejercicio);
	      		data_2.push(packet.c);
	    	} else {
	    		labels_2.push(labels_1[i]);
	      		data_2.push(0);
	    	}
	    });
	    // console.log(facturacion_graph)
	    // console.log(labels_1)
	    // console.log(labels_2)
	    // console.log(data_1)
	    // console.log(data_2)
	    line(div, labels_1, labels_2, data_1, data_2)
  	}

  	function barchart(div, labels_1, labels_2, data_1, data_2, title)
        {
        	console.log(data_1)
        	console.log(data_2)
        	var myChart = new Chart(div, {
		        type: 'bar',
		        data: {
		            labels: labels_2,
		            datasets: [{
		                label: "{{company.name|safe}}",
		                data: data_1,
		                backgroundColor: 'rgba(47,79,79, 0.2)',
		                borderColor: 'rgba(47,79,79, 1)',
		                borderWidth: 2
		            },
		            {
		                label: "Average comparables",
		                data: data_2,
		                backgroundColor: 'rgba(169,169,169, 0.2)',
		                borderColor: 'rgba(169,169,169, 1)',
		                borderWidth: 2
		            }]
		        },
		        options: {
		            legend: {
		                display: false,
		                labels: {
		                    fontColor: 'rgb(255, 99, 132)'
		                }
		            },
		            title: {
		                display: true,
		                text: title
		            },
		            responsive: true,
		            scales: {
		                yAxes: [{
		                    ticks: {
		                        beginAtZero:true
		                    },
		                    stacked: true
		                },
		                ],
		                xAxes: [{
		                    stacked: true
		                },
		                ]
		            }
		        }
		    });
    	}

    function stackedbarchart(div, labels_1, labels_2, data_1, data_2, title)
        {
        	var dataset_1 = [data_1,data_2]
        	var myChart = new Chart(div, {
		        type: 'bar',
		        data: {
		            labels: ["You","Comparables"],
		            datasets: [{
		            	type: 'bar',
		                label: "Valor",
		                data: dataset_1,
		                backgroundColor: 'rgba(47,79,79, 0.2)',
		                borderColor: 'rgba(47,79,79, 1)',
		                borderWidth: 2
		            }
		            ]
		        },
		        options: {
		            legend: {
		                display: false,
		                labels: {
		                    fontColor: 'rgb(255, 99, 132)'
		                }
		            },
		            scales: {
		                yAxes: [{
						    stacked: false,
						    ticks: {
				                beginAtZero: true
				            }
		                }],
		                xAxes: [{
					        stacked: false
					    }]
		            }
		        }
		    });
    	}

  	function donut(div, data, labels)
        {
           var myDoughnutChart = new Chart(div, {
            type: 'doughnut',
            data: {
                labels: labels,
                datasets: [
                    {
                        data: data,
                        backgroundColor: [
                            'rgba(128,128,128, 0.5)',
                            'rgba(47,79,79, 0.5)',
                            'rgba(119,136,153, 0.5)',
                            'rgba(192,192,192, 0.5)',
		                    'rgba(169,180,169, 0.5)',
		                    'rgba(128,128,128, 0.5)',
                    		'rgba(220,220,220, 0.5)',
                        ],
                        hoverBackgroundColor: [
                            'rgba(128,128,128, 1)',
                            'rgba(47,79,79, 1)',
                            'rgba(119,136,153, 1)',
                            'rgba(192,192,192, 1)',
		                    'rgba(169,180,169, 1)',
		                    'rgba(128,128,128, 1)',
                    		'rgba(220,220,220, 1)',
                        ]
                    }]
            },
            animation:{
                animateScale:true
            }
        });
        }

    function line(div, labels, labels2, data1, data2) {
    	var scatterChart = new Chart(div, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
            label: "Comparables",
            backgroundColor: "rgba(220,220,220,0.5)",
            borderColor: "rgba(220,220,220,0.8)",
            highlightFill: "rgba(220,220,220,0.75)",
            pointHoverBackgroundColor: "rgba(220,220,220,1)",
            showTooltip: false, //NEW OPTION DON"T NEED TO INCLUDE IT IF YOU WANT TO DISPLAY BUT WON"T HURT IF YOU DO
            data: data1
        }, {
            label: "{{company.name|safe}}",
            backgroundColor: "rgba(47,79,79,0.5)",
            borderColor: "rgba(47,79,79,0.8)",
            highlightFill: "rgba(47,79,79,0.75)",
            pointHoverBackgroundColor: "rgba(47,79,79,1)",
            showTooltip: false, //NEW OPTION DON"T NEED TO INCLUDE IT IF YOU WANT TO DISPLAY BUT WON"T HURT IF YOU DO
            data: data2
        }]},
        options: {
          responsive: true,
          pointDotRadius: 10,
          bezierCurve: false,
          scaleShowVerticalLines: false,
          scaleGridLineColor: 'black'
        }
    });
    }
</script>
{% endblock %}

 {% block alt_js %}
<script type="text/javascript">

	$(document).ready(function(){

	});


</script>
{% endblock alt_js %}
